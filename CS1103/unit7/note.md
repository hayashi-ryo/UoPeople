# unit7

- This unit will address the following topics:
  - Actions and buttons
  - Complex Components and MVC

## Goal

- Learn more about actions and buttons.
- Look at some more Swing components.
- Understand the MVC pattern for designing GUIs.

## Task

- [x] Reading assignment
- [x] Discussion Forum
  - [x] first post
  - [x] reply classmates
- [x] Programming assignmet
- [x] Peer Asessment
- [x] Learning Journal
- [x] Take Self-Quiz

## Reading Assignment

- Section 13.3: Actions and Buttons
  - JButtonクラスは押しボタンを表現する。
- Section 13.4: Complex Components and MVC
  - Model-View-Controllerパターン
  - Model
    - コンポーネントの現在の状態を示す(データ)
  - View
    - 画面上の視覚的な表現
  - Controller
    - ユーザによって生成されたアクションに対応する処理を実行する。
- Section 13.5: Finishing Touches

## Discussion Forum

The Model-View-Controller design pattern decouples data access, business logic, data presentation, and user interaction. Discuss.

クラスメイトに皆さんこんにちは、今回のテーマに対する私の見解を説明します。
今回のテーマである、MVCモデルとは良いソフトウェアに求められる要素である疎結合性を実現し、複数人のプログラマの責任範囲や影響範囲を明確にするための考え方です。テキストによれば以下のように説明されます。
When the MVC pattern is applied to a component, the model consists of the data that represents the current state of the component. The view is simply the visual presentation of the component on the screen. And the controller is the aspect of the component that carries out actions in response to events generated by the user (or by other sources such as timers). The idea is to assign responsibility for the model, the view, and the controller to different objects.(Eck, D. J. 2022)
JavaFXによる実装を例にすると、ユーザ操作によるプログラムへのリスエストは以下のようなながれで処理されます。

1. ボタン押下などユーザアクションが発生
2. コントローラーが実行すべきビジネスロジックを判断し、Modelを呼び出す
3. Modelは処理を行い、結果をコントローラに返却する
4. Controllerは返却された結果を画面表示するために、Viewへ渡す。
5. Viewによって画面表示する

このように、ユーザアクションをビジネスロジック、画面上の視覚的なリソース、ユーザによって生成される具体的なアクションへ分割することができます。この考え方は、unit6のLab10の課題の中で私たちはすでに実践していました。
DrawTextPanel.javaはユーザに表示するViewとユーザアクションによって発生するイベントをコントロールする役割を持っています。以下のようなコードは、まさにコントロールを行う部分です。

```java
private void doMenuCommand(String command) {
  if (command.equals("Save...")) { // save all the string info to a file
   SimpleFileChooser fileChooser = new SimpleFileChooser();
   File outputFile = fileChooser.getOutputFile();
   try {
   PrintWriter p = new PrintWriter (new FileWriter(outputFile));
   Color background = canvas.getBackground();//backgroung in the first line
   p.println(background.getRGB());
    for (DrawTextItem s: theString){
     p.println(s.getString()); //the text 
     p.println(s.getX());//x-coordinate of text
     p.println(s.getY());//y-coordinate of text
     Color textcolor = s.getTextColor();
     p.println(textcolor.getRGB());//color of the text
    }
   p.close();// close the print writer
   }
   catch (Exception e) {
    //show error in a messagebox
    JOptionPane.showMessageDialog(this, "Error while saving file!!\n" +e);
   }
  }
} 
```

また、DrawTextItem.javaはユーザが操作を行うコンポーネントの設計とその状態をインスタンスとして生成する役割を持っています。前回のユニットでは、MVCの概念によって分割されているプログラムがすでに実装されていたために新しい処理を改修量を最小限とした上で実装することができたのです。

References
Eck, D. J. (2022). Introduction to Programming Using Java
Version 9.0, JavaFX Edition. Hobart and William Smith Colleges. <https://math.hws.edu/javanotes/index.html>

## Written Assignment

## Learning Journal

今週のユニットでは、新たな知識としてMVCモデルについて学習を行いました。まずはこの内容について私の理解を説明します。
MVCモデルとは良いソフトウェアに求められる要素である疎結合性を実現し、複数人のプログラマの責任範囲や影響範囲を明確にするための考え方です。テキストによれば以下のように説明されます。
When the MVC pattern is applied to a component, the model consists of the data that represents the current state of the component. The view is simply the visual presentation of the component on the screen. And the controller is the aspect of the component that carries out actions in response to events generated by the user (or by other sources such as timers). The idea is to assign responsibility for the model, the view, and the controller to different objects.(Eck, D. J. 2022)
一言で表すと、ユーザインターフェースとインスタンスの状態を分離し、それをコントローラで繋ぐことを目的とするものです。この概念を利用してプログラミングをおこなうことで、アプリケーションの疎結合性を実現し、バグの少ないアプリケーションを実装することが可能になります。
今回のユニットではJavaFXというGUIフレームワークを意識したものでしたが、それ以外のフレームワークについてもいくつか調べてみました。

1. Spring Framework
2. Play Framework
3. JSF(Java Server Faces)
4. SAStruts（Super Agile Struts）
5. Struts
6. Apache Wicket
7. Dropwizard
8. ZK
9. Ninja web framework
10. Spark Framework

それぞれのフレームワークは、歴史や特徴などが存在するので、実現したいアプリケーションの特性に応じたフレームワークを採用することが重要な考え方になります。私自身、大人数での開発のためにSpring Frameworkを、非常に歴史のあるプロジェクトのメンテナンスの用途でStrutsを利用したことがある。
このように、アプリケーションを実現するために考案される考え方を実現するための枠組みが多数提供されているため、新しいアプリケーションを実装する際は、用途や規模に応じた選択を行うことが重要になる。また、フレームワークにこだわりすぎず、新しい状態へ飛び込んでいくことも必要だと考える。
また、今回のユニットでは今までユニットよりも実践的な内容のプログラムの実装を行なった。Lab11のWebServerのプログラムはその典型的な例であったと感じています。まず初めに、目的とする動作をsend/requestの形式で確認し、その結果を得ることができるシンプルなサーバ機能を実装していく流れであった。この中では、サンプルとして提供されるコードは存在するものの、それらをどのようにつないでいくのか、という点は、実装したい機能を明確に理解した上でないと実現することが難しいものであった。特に、スレッドを管理するコードの実装を行う部分では、私自身どのような目的で機能を実装していくのか明確にすることができず、戸惑いを覚えてしまう部分が存在した。目的とする要件から機能を明確にし、具体的な機能を実装しテストを行う一連のプロセスは、非常に基本的なワークフローとなるため、しっかりと身につけていきたいと考えている。
最後に、次回のユニットと最終試験をもってこのコースが完了する。よりよい成績を得た上で終了するためにも、ここまでのユニットで学習した事項に関する復讐を実施していく。
